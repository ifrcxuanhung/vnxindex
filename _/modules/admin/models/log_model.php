<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');
/* * *******************************************************************************************************************
 * Client  Name ：  IFRC
 * ---------------------------------------------------------------------------------------------------------------------
 * Project Name ：  IMS v3.0
 * ---------------------------------------------------------------------------------------------------------------------
 * File Name    ：  log.php
 * ---------------------------------------------------------------------------------------------------------------------
 * Entry Server ：
 * ---------------------------------------------------------------------------------------------------------------------
 * Called By    ：  System
 * ---------------------------------------------------------------------------------------------------------------------
 * Notice       ：
 * ---------------------------------------------------------------------------------------------------------------------
 * Copyright    ：  IFRC
 * ---------------------------------------------------------------------------------------------------------------------
 * Comment      ：  controller services  
 * ---------------------------------------------------------------------------------------------------------------------
 * History      ：
 * ---------------------------------------------------------------------------------------------------------------------
 * Version V001 ：  2013.09.06 (Minh Đẹp Trai)        New Create 
 * ******************************************************************************************************************* */
class log_model extends CI_Model {

    public $table = 'log';

    function __construct() {
        parent::__construct();
    }

    function import_log($path_file){
        $base_url = str_replace("/", "//", $path_file);
        $this->db->query("TRUNCATE TABLE user_log");
        $this->db->query("LOAD DATA LOCAL INFILE '" . $base_url . "' INTO TABLE user_log FIELDS TERMINATED BY '\t' IGNORE 1 LINES (date, user, url)");
    }

    function listLog(){
        return $this->db->get('user_log')->result_array();
    }
}