<?php

/* * *******************************************************************************************************************
 * Client  Name ：  IFRC
 * ---------------------------------------------------------------------------------------------------------------------
 * Project Name ：  VNXINDEX
 * ---------------------------------------------------------------------------------------------------------------------
 * File Name    ：  performance.php 
 * ---------------------------------------------------------------------------------------------------------------------
 * Entry Server ：
 * ---------------------------------------------------------------------------------------------------------------------
 * Called By    ：  System
 * ---------------------------------------------------------------------------------------------------------------------
 * Notice       ：
 * ---------------------------------------------------------------------------------------------------------------------
 * Copyright    ：  IFRC
 * ---------------------------------------------------------------------------------------------------------------------
 * Comment      ：
 * ---------------------------------------------------------------------------------------------------------------------
 * History      ：
 * ---------------------------------------------------------------------------------------------------------------------
 * Version V001 ：  2013.12.27 (Minh Đẹp Trai)        New Create 
 * ******************************************************************************************************************* */

class Performance extends Welcome {
    /*     * ***********************************************************************************************************
     * Name         ： __construct
     * -----------------------------------------------------------------------------------------------------------------
     * Description  ：
     * -----------------------------------------------------------------------------------------------------------------
     * Params       ：
     * -----------------------------------------------------------------------------------------------------------------
     * Return       ：
     * -----------------------------------------------------------------------------------------------------------------
     * Warning      ：
     * -----------------------------------------------------------------------------------------------------------------
     * Copyright    ： IFRC
     * -----------------------------------------------------------------------------------------------------------------
     * M001         ： New  2013.12.27 (Minh Đẹp Trai)  
     * *************************************************************************************************************** */

    function __construct() {
        parent::__construct();
        $this->load->Model('midx_model');
    }

    /*     * ***********************************************************************************************************
     * Name         ： index
     * -----------------------------------------------------------------------------------------------------------------
     * Description  ：
     * -----------------------------------------------------------------------------------------------------------------
     * Params       ：
     * -----------------------------------------------------------------------------------------------------------------
     * Return       ：
     * -----------------------------------------------------------------------------------------------------------------
     * Warning      ：
     * -----------------------------------------------------------------------------------------------------------------
     * Copyright    ： IFRC
     * -----------------------------------------------------------------------------------------------------------------
     * M001         ： New  2013.12.27 (Minh Đẹp Trai)  
     * *************************************************************************************************************** */

    public function indexes_performances_calculator() {
        $data['config'] = $this->db->get('config')->row_array();
        $data['base_url'] = base_url();
        $data['total'] = $this->midx_model->getTotal();
        foreach ($this->midx_model->getType() as $v) {
            $type[] = $v['type']['TYPE'];
        }
        $data['Type'] = remove_emty_array($type);
        $data['Price'] = remove_emty_array($this->midx_model->getPrice());
        $data['Code'] = remove_emty_array($this->midx_model->getCode());
        $data['subtype'] = remove_emty_array($this->midx_model->getSubtype());
        $data['Currency'] = remove_emty_array($this->midx_model->getCurr());
        $data['Provider'] = remove_emty_array($this->midx_model->getProvider());
        $data['Coverage'] = remove_emty_array($this->midx_model->getPlace());
        $data['SHORTNAME'] = remove_emty_array($this->midx_model->getSName());
        $data['perf'] = $this->midx_model->getUserPerf();
        $this->data->date = $this->midx_model->listDate();
        $this->data->perf_data = $this->midx_model->getPerfData($data['perf'][0]['code']);
        $this->data->perf = $data['perf'];

        $this->data->data = $data;
        $this->data->total = $data['total']['TOTAL'];
        $this->template->write_view('content', 'performance/indexes_performances_calculator', $this->data);
        $this->template->render();
    }
}
